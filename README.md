## Практика №1. Макогон Артём. Группа БПМИ206

### Сделал все пункты на полный балл

Чтобы запустить весь пайплайн нужно запустить скрипт:
```bash
bash launch.sh
```

Отдельные части (build, run, test, stop) можно запускать скриптами из папки `scripts`. Например: 
```bash
bash scripts/test.sh
```
(только для этого все должно быть собрано и предварительно запущено).

Тестирование идет в 2 этапа:

1. С помощью обычной udp рассылки по очереди к каждому поднятому worker-у 
    - каждый докер контейнер отвечает за свой собственный формат и проводит бенчмарк заново на каждый запрос.
    - каждый контейнер ждет произвольный поток байт в udp соединение и отправляет форматированный вывод в ответ: 
    ```
    [тип сериализации] - [размер сериализованной струкруты в байтах] - [время сериализации] - [время десериализации]
    ```
2. C помощью multicast рассылки (адрес указан в `docker-compose.yaml`), все получают запрос и отправляют ответ. Прокси получает все ответы и отправляет их конкатенацию пользователю.

## Ручное тестирование

Если все серверы запущены, то протестировать можно обращаясь к прокси. Доступные запросы для тестирования форматов по отдельности:
```
echo "get_result json" | nc -u localhost 2000 -w 2
echo "get_result xml" | nc -u localhost 2000 -w 2
echo "get_result native" | nc -u localhost 2000 -w 2
echo "get_result proto" | nc -u localhost 2000 -w 2
echo "get_result avro" | nc -u localhost 2000 -w 2
echo "get_result yaml" | nc -u localhost 2000 -w 2
echo "get_result msg_pack" | nc -u localhost 2000 -w 2
````

Запрос для тестирования всех форматов через multicast:
```
echo "get_result all" | nc -u localhost 2000 -w 2
```

Можно напрямую обращаться к контейнерам-воркерам: порты прописаны в `docker-compose.yaml`. Пример для `json`:
```
echo "any bytes" | nc -u localhost 12001 -w 2
```

